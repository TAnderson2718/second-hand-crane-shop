"use strict";(wx["webpackJsonp"]=wx["webpackJsonp"]||[]).push([[982],{1550:function(e,a,n){var s=n(2180),r=n(8118),l=n(5308),c=n(7042),i=n(4460),t=n(597),o=n(1867),d=n(5023),h=n(201),x=n(1515),m=n(2954),u=n.n(m),f=n(302),j=n(1876),v=n(2269),N=function(e){function a(){var e;(0,c.Z)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return e=(0,t.Z)(this,a,[].concat(s)),(0,d.Z)(e,"state",{listing:null,loading:!0,error:null,currentImageIndex:0}),(0,d.Z)(e,"loadListingDetail",(0,l.Z)((0,r.Z)().m(function a(){var n,s,l,c;return(0,r.Z)().w(function(a){while(1)switch(a.p=a.n){case 0:if(a.p=0,n=u().getCurrentInstance().router,s=n.params.id,s){a.n=1;break}throw new Error("\u5546\u54c1ID\u4e0d\u80fd\u4e3a\u7a7a");case 1:if(l=(0,f._r)(parseInt(s)),l){a.n=2;break}throw new Error("\u5546\u54c1\u4e0d\u5b58\u5728\u6216\u5df2\u4e0b\u67b6");case 2:e.setState({listing:l,loading:!1}),a.n=4;break;case 3:a.p=3,c=a.v,console.error("\u52a0\u8f7d\u5546\u54c1\u8be6\u60c5\u5931\u8d25:",c),e.setState({error:c.message,loading:!1}),(0,j.CF)(c.message,"error");case 4:return a.a(2)}},a,null,[[0,3]])}))),(0,d.Z)(e,"handleCall",function(){var e=(0,l.Z)((0,r.Z)().m(function e(a){var n;return(0,r.Z)().w(function(e){while(1)switch(e.p=e.n){case 0:if(a){e.n=1;break}return(0,j.CF)("\u8054\u7cfb\u7535\u8bdd\u4e0d\u53ef\u7528","error"),e.a(2);case 1:return e.p=1,e.n=2,(0,j.Pt)(a);case 2:e.n=4;break;case 3:e.p=3,n=e.v,console.error("\u62e8\u6253\u7535\u8bdd\u5931\u8d25:",n),(0,j.CF)("\u62e8\u6253\u7535\u8bdd\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5","error");case 4:return e.a(2)}},e,null,[[1,3]])}));return function(a){return e.apply(this,arguments)}}()),(0,d.Z)(e,"handleFavorite",function(a){if(a)try{var n=f.pj.includes(a);n?((0,f.zm)(a),(0,j.CF)("\u5df2\u53d6\u6d88\u6536\u85cf")):((0,f._p)(a),(0,j.CF)("\u6536\u85cf\u6210\u529f")),e.forceUpdate()}catch(e){console.error("\u6536\u85cf\u64cd\u4f5c\u5931\u8d25:",e),(0,j.CF)("\u64cd\u4f5c\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5","error")}}),(0,d.Z)(e,"handleImagePreview",function(e,a){if(a&&0!==a.length)try{(0,j.EO)(e,a)}catch(e){console.error("\u9884\u89c8\u56fe\u7247\u5931\u8d25:",e),(0,j.CF)("\u9884\u89c8\u56fe\u7247\u5931\u8d25","error")}}),(0,d.Z)(e,"handleBack",function(){(0,j.n)()}),e}return(0,o.Z)(a,e),(0,i.Z)(a,[{key:"componentDidMount",value:function(){this.loadListingDetail()}},{key:"render",value:function(){var e=this,a=this.state,n=a.listing,s=a.loading,r=a.error;if(s)return(0,v.jsx)(x.G7,{className:"detail",children:(0,v.jsx)(x.G7,{className:"loading-container",children:(0,v.jsx)(x.xv,{children:"\u52a0\u8f7d\u4e2d..."})})});if(r||!n)return(0,v.jsx)(x.G7,{className:"detail",children:(0,v.jsxs)(x.G7,{className:"error-container",children:[(0,v.jsx)(x.xv,{className:"error-text",children:r||"\u5546\u54c1\u4e0d\u5b58\u5728"}),(0,v.jsx)(x.zx,{className:"btn btn-primary",onClick:this.handleBack,children:"\u8fd4\u56de"})]})});var l=f.pj.includes(n.id);return(0,v.jsxs)(x.G7,{className:"detail",children:[(0,v.jsxs)(x.pf,{className:"detail-scroll",scrollY:!0,children:[(0,v.jsx)(x.G7,{className:"detail-images",children:n.images&&n.images.length>0&&(0,v.jsx)(x.Ee,{className:"detail-main-image",src:n.images[0],mode:"aspectFill",onClick:function(){return e.handleImagePreview(n.images[0],n.images)},lazyLoad:!0})}),(0,v.jsxs)(x.G7,{className:"detail-content card",children:[(0,v.jsxs)(x.G7,{className:"detail-header",children:[(0,v.jsx)(x.xv,{className:"detail-title",children:n.title}),(0,v.jsx)(x.xv,{className:"detail-price",children:(0,j.T4)(n.price)})]}),(0,v.jsx)(x.G7,{className:"detail-tags",children:n.tags&&n.tags.map(function(e,a){return(0,v.jsx)(x.xv,{className:"tag tag-primary",children:e},a)})}),(0,v.jsxs)(x.G7,{className:"detail-info",children:[(0,v.jsxs)(x.G7,{className:"info-row",children:[(0,v.jsx)(x.xv,{className:"info-label",children:"\u8bbe\u5907\u7c7b\u578b:"}),(0,v.jsx)(x.xv,{className:"info-value",children:n.type||"\u672a\u77e5"})]}),(0,v.jsxs)(x.G7,{className:"info-row",children:[(0,v.jsx)(x.xv,{className:"info-label",children:"\u54c1\u724c:"}),(0,v.jsx)(x.xv,{className:"info-value",children:n.brand||"\u672a\u77e5"})]}),(0,v.jsxs)(x.G7,{className:"info-row",children:[(0,v.jsx)(x.xv,{className:"info-label",children:"\u89c4\u683c:"}),(0,v.jsx)(x.xv,{className:"info-value",children:n.tonnage?"".concat(n.tonnage,"\u5428"):"\u672a\u77e5"})]}),(0,v.jsxs)(x.G7,{className:"info-row",children:[(0,v.jsx)(x.xv,{className:"info-label",children:"\u51fa\u5382\u65e5\u671f:"}),(0,v.jsx)(x.xv,{className:"info-value",children:n.manufacture_date||"\u672a\u77e5"})]}),(0,v.jsxs)(x.G7,{className:"info-row",children:[(0,v.jsx)(x.xv,{className:"info-label",children:"\u5de5\u4f5c\u5c0f\u65f6:"}),(0,v.jsx)(x.xv,{className:"info-value",children:n.work_hours?"".concat(n.work_hours,"\u5c0f\u65f6"):"\u672a\u77e5"})]}),(0,v.jsxs)(x.G7,{className:"info-row",children:[(0,v.jsx)(x.xv,{className:"info-label",children:"\u884c\u9a76\u91cc\u7a0b:"}),(0,v.jsx)(x.xv,{className:"info-value",children:n.mileage?"".concat(n.mileage,"\u516c\u91cc"):"\u672a\u77e5"})]}),(0,v.jsxs)(x.G7,{className:"info-row",children:[(0,v.jsx)(x.xv,{className:"info-label",children:"\u6240\u5728\u5730\u533a:"}),(0,v.jsx)(x.xv,{className:"info-value",children:n.location||"\u672a\u77e5"})]}),(0,v.jsxs)(x.G7,{className:"info-row",children:[(0,v.jsx)(x.xv,{className:"info-label",children:"\u53d1\u5e03\u65f6\u95f4:"}),(0,v.jsx)(x.xv,{className:"info-value",children:n.post_date||"\u672a\u77e5"})]})]}),(0,v.jsxs)(x.G7,{className:"detail-contact",children:[(0,v.jsx)(x.xv,{className:"contact-title",children:"\u8054\u7cfb\u4fe1\u606f"}),(0,v.jsxs)(x.G7,{className:"contact-info",children:[(0,v.jsx)(x.xv,{className:"contact-person",children:n.contact_person||"\u8054\u7cfb\u4eba"}),(0,v.jsx)(x.xv,{className:"contact-phone",children:n.phone||"\u7535\u8bdd\u672a\u63d0\u4f9b"})]})]})]})]}),(0,v.jsxs)(x.G7,{className:"detail-actions",children:[(0,v.jsx)(x.zx,{className:"btn btn-secondary",onClick:function(){return e.handleFavorite(n.id)},children:l?"\u5df2\u6536\u85cf":"\u6536\u85cf"}),(0,v.jsx)(x.zx,{className:"btn btn-primary",onClick:function(){return e.handleCall(n.phone)},children:"\u62e8\u6253\u7535\u8bdd"})]})]})}}])}(h.Component),g={navigationBarTitleText:"\u5546\u54c1\u8be6\u60c5"};Page((0,s.createPageConfig)(N,"pages/detail/detail",{root:{cn:[]}},g||{}))}},function(e){var a=function(a){return e(e.s=a)};e.O(0,[107,216,592],function(){return a(1550)});e.O()}]);